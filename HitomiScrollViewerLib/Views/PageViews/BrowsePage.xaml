<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="HitomiScrollViewerLib.Views.PageViews.BrowsePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:views="using:HitomiScrollViewerLib.Views"
    xmlns:bpviews="using:HitomiScrollViewerLib.Views.BrowsePageViews"
    xmlns:vms="using:HitomiScrollViewerLib.ViewModels"
    xmlns:bpvms="using:HitomiScrollViewerLib.ViewModels.BrowsePageVMs"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
    >
    <ScrollViewer>
        <StackPanel Spacing="8">
            <Grid ColumnSpacing="8" RowSpacing="8"
                  Padding="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="3*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <views:TagFilterEditor ViewModel="{x:Bind ViewModel.TagFilterSetEditorVM}"
                                       Grid.Column="0"/>
                <Grid Grid.Column="1"
                      VerticalAlignment="Stretch"
                      RowSpacing="16">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Button x:Name="CreateGalleryFilterButton"
                                Grid.Row="0"
                                BorderBrush="Magenta"
                                HorizontalAlignment="Stretch"
                                Padding="16"
                                Command="{x:Bind ViewModel.CreateGalleryFilterCommand}">
                        <TextBlock FontSize="{StaticResource SubtitleTextBlockFontSize}"
                                   Text="Create Gallery Filter"/>
                    </Button>
                    <Border Grid.Row="1"
                            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                            CornerRadius="{StaticResource OverlayCornerRadius}">
                        <ItemsRepeater Grid.Row="1" ItemsSource="{x:Bind ViewModel.SearchFilterVMs}">
                            <ItemsRepeater.Layout>
                                <StackLayout Spacing="4"/>
                            </ItemsRepeater.Layout>
                            <ItemsRepeater.ItemTemplate>
                                <DataTemplate x:DataType="vms:SearchFilterVM">
                                    <Grid ColumnSpacing="16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Button Grid.Column="0"
                                                Command="{x:Bind HandleSearchFilterClickCommand}">
                                            <views:SearchFilterView ViewModel="{x:Bind}"/>
                                        </Button>
                                        <AppBarButton Grid.Column="1"
                                                    Command="{x:Bind DeleteCommand}"
                                                    CommandParameter="{x:Bind}">
                                        </AppBarButton>
                                    </Grid>
                                </DataTemplate>
                            </ItemsRepeater.ItemTemplate>
                        </ItemsRepeater>
                    </Border>
                </Grid>
            </Grid>
            <Grid HorizontalAlignment="Stretch">
                <Button HorizontalAlignment="Left">
                    <SymbolIcon Symbol="Sort"></SymbolIcon>
                </Button>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock x:Name="PageTextBlock"/>
                    <ComboBox ItemsSource="{x:Bind ViewModel.PageIndexes, Mode=OneWay}"
                              SelectedIndex="{x:Bind ViewModel.PageIndex, Mode=TwoWay}"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <TextBlock x:Name="PageSizeTextBlock"/>
                    <ComboBox ItemsSource="{x:Bind ViewModel.PageSizes, Mode=OneWay}"
                              SelectedIndex="{x:Bind ViewModel.PageSize, Mode=TwoWay}"/>
                </StackPanel>
            </Grid>
            <ItemsRepeater ItemsSource="{x:Bind ViewModel.CurrentGalleryBrowseItemVMs}">
                <ItemsRepeater.Layout>
                    <StackLayout Spacing="4"></StackLayout>
                </ItemsRepeater.Layout>
                <ItemsRepeater.ItemTemplate>
                    <DataTemplate x:DataType="bpvms:GalleryBrowseItemVM">
                        <bpviews:GalleryBrowseItem ViewModel="{x:Bind}"/>
                    </DataTemplate>
                </ItemsRepeater.ItemTemplate>
            </ItemsRepeater>
        </StackPanel>
    </ScrollViewer>
</Page>
